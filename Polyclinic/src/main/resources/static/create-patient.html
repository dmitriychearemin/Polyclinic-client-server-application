<!DOCTYPE html>
<html>
<head>
  <title>Create Patient</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .back-button {
      margin-bottom: 20px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      margin-bottom: 5px;
    }
    .form-group input {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
    }
    .form-buttons {
      margin-top: 20px;
    }
  </style>
</head>
<body>
<button class="back-button" onclick="window.history.back()">Back</button>
<h1>Create New Patient</h1>

<form id="createPatientForm">
  <div class="form-group">
    <label for="firstName">First Name *</label>
    <input type="text" id="firstName" required>
  </div>
  <div class="form-group">
    <label for="lastName">Last Name *</label>
    <input type="text" id="lastName" required>
  </div>
  <div class="form-group">
    <label for="birthDate">Birth Date *</label>
    <input type="date" id="birthDate" required>
  </div>
  <div class="form-group">
    <label for="phone">Phone *</label>
    <input type="tel" id="phone" required>
  </div>
  <div class="form-group">
    <label for="email">Email</label>
    <input type="email" id="email">
  </div>
  <div class="form-group">
    <label for="departmentId">Department ID *</label>
    <input type="number" id="departmentId" required>
  </div>
  <div class="form-buttons">
    <button type="button" onclick="createPatient()">Create Patient</button>
  </div>
</form>

<script>
  function createPatient() {
    const patient = {
      firstName: document.getElementById('firstName').value,
      lastName: document.getElementById('lastName').value,
      birthDate: document.getElementById('birthDate').value,
      phone: document.getElementById('phone').value,
      email: document.getElementById('email').value,
    };
    const departmentId = document.getElementById('departmentId').value;

    fetch('/api/patients', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ patient, departmentId }),
    })
      .then(response => {
        if (!response.ok) throw new Error('Error creating patient');
        return response.json();
      })
      .then(() => {
        alert('Patient created successfully!');
        window.location.href = 'index.html'; // Перенаправление на главную страницу
      })
      .catch(error => alert(error.message));
  }
</script>
</body>
</html>